webpackJsonp([1],{"+BTi":function(t,e){},"0gqb":function(t,e){},"8MZz":function(t,e){},"C+C7":function(t,e){},DsdC:function(t,e){},E51W:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Yq4J"),a("+BTi");var o=a("qubY"),s=a.n(o),n=(a("X+ky"),a("HJMx")),i=a.n(n),r=(a("ylrw"),a("6oiW")),l=a.n(r),c=(a("RWjY"),a("aMwW")),u=a.n(c),h=(a("jAzQ"),a("wOhx")),d=a.n(h),m=a("7+uW"),p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},b=a("VU/8")({name:"app"},p,!1,function(t){a("Rj+v")},null,null).exports,_=a("/ocq"),v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content-left"},[a("mu-list",{attrs:{value:t.activeList},on:{change:t.handleListChange}},[a("mu-list-item",{attrs:{title:"书籍管理",value:"list1",toggleNested:""}},[a("mu-icon",{attrs:{slot:"left",value:"book",color:"#009688"},slot:"left"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"书籍列表",value:"list2",to:"/bookList"},slot:"nested"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"章节列表",value:"list3",to:"/bookUpload/0"},slot:"nested"})],1),t._v(" "),a("mu-list-item",{attrs:{title:"功能管理",value:"list4",toggleNested:"",open:!1}},[a("mu-icon",{attrs:{slot:"left",value:"functions",color:"#009688"},slot:"left"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"排行管理",value:"list5",to:"sortManage"},slot:"nested"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"评论管理",value:"list6",to:"/commentManage"},slot:"nested"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"书籍统计",value:"list7",to:"/bookStatistic"},slot:"nested"})],1),t._v(" "),a("mu-list-item",{attrs:{title:"读者管理",value:"list8",toggleNested:"",open:!1}},[a("mu-icon",{attrs:{slot:"left",value:"person",color:"#009688"},slot:"left"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"读者信息",value:"list9",to:"/readerData"},slot:"nested"})],1),t._v(" "),a("mu-list-item",{attrs:{title:"数据管理",value:"list10",toggleNested:"",open:!1}},[a("mu-icon",{attrs:{slot:"left",value:"data_usage",color:"#009688"},slot:"left"}),t._v(" "),a("mu-list-item",{attrs:{slot:"nested",title:"数据统计",value:"list11",to:"/dataShow"},slot:"nested"})],1)],1)],1),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"breadcrumb"}),t._v(" "),a("div",{staticClass:"body"},[a("router-view")],1)])]),t._v(" "),a("div",{staticClass:"footer"},[t._v("\n    猫阅读 ©2017 管理后台\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"logo"},[this._v("\n      猫阅读后台管理系统\n    ")])])}]},f=a("VU/8")({data:function(){return{activeTab:"tab1",activeList:"list2"}},methods:{handleTabChange:function(t){this.activeTab=t},handleListChange:function(t){this.activeList=t}}},v,!1,function(t){a("DsdC")},"data-v-777d86fc",null).exports,k={data:function(){return{bookType:["仙剑","玄幻","悬疑","奇幻","军事","历史","竞技","科幻","校园","社会","其它"],searchTxt:"",tableData:[],height:"500px",total:50,current:1,controPageKind:1}},mounted:function(){this.reqAllBookInfo(this.current)},watch:{controPageKind:function(t){this.current=1}},methods:{handleClick:function(t){switch(this.controPageKind){case 1:this.reqAllBookInfo(t);break;case 2:this.distinctBookInfo(0,t);break;case 3:this.distinctBookInfo(1,t);break;case 4:this.searchBookInfo(this.searchTxt,t);break;default:console.log("出错")}},reqAllBookInfo:function(t){var e=this;this.controPageKind=1;var a=10*(t-1);axios({method:"POST",url:"./api/getBookInfo",data:{pageNumber:a}}).then(function(t){t=t.data,e.tableData=t.tableData,e.total=t.allPageNum[0].allNumber})},distinctBookInfo:function(t,e){var a=this;this.controPageKind=t?3:2;var o=10*(e-1);axios({method:"POST",url:"./api/distinctBookInfo",data:{is_show:t,pageNumber:o}}).then(function(t){t=t.data,a.tableData=t.tableData,a.total=t.allPageNum[0].allNumber})},searchBookInfo:function(t,e){var a=this;this.controPageKind=4;var o=10*(e-1);axios({method:"POST",url:"./api/searchBookInfo",data:{field:t,pageNumber:o}}).then(function(t){t=t.data,a.tableData=t.tableData,a.total=t.allPageNum[0].allNumber})},changeShow:function(t){var e=this,a=this.tableData[t].id,o=this.tableData[t].is_show;o=1==o?0:1,axios({method:"POST",url:"./api/changeShow",data:{id:a,is_show:o}}).then(function(a){(a=a.data).statue?e.tableData[t].is_show=!e.tableData[t].is_show:alert("改变上架状态失败")})},deleteBook:function(t){var e=this;confirm("即将删除书籍"+this.tableData[t].book_name+"及其所有章节，确认继续操作？")&&axios({method:"POST",url:"./api/deleteBook",data:{id:this.tableData[t].id}}).then(function(a){(a=a.data).statue?(alert("删除书籍"+e.tableData[t].book_name+"成功"),e.reqAllBookInfo(e.current)):alert("删除书籍"+e.tableData[t].book_name+"失败")})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"listName"},[t._v("书籍列表")]),t._v(" "),a("div",{staticClass:"functionArea"},[a("mu-text-field",{staticClass:"searchTxted",attrs:{hintText:"请输入书籍名或作者名"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"查询",backgroundColor:"#00bfa5"},on:{click:function(e){t.searchBookInfo(t.searchTxt,t.current)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"已上架",backgroundColor:"#ffca28"},on:{click:function(e){t.distinctBookInfo(1,t.current)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"未上架",backgroundColor:"#ffc107"},on:{click:function(e){t.distinctBookInfo(0,t.current)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"全部",backgroundColor:"#ff9800"},on:{click:function(e){t.reqAllBookInfo(t.current)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"上传书籍",backgroundColor:"#ff5722"},on:{click:function(e){t.$router.push("/bookDetails/0")}}})],1),t._v(" "),a("div",{staticClass:"Booktable"},[a("mu-table",{attrs:{fixedFooter:!1,fixedHeader:!0,height:t.height,enableSelectAll:!1,multiSelectable:!1,selectable:!1,showCheckbox:!1}},[a("mu-thead",{attrs:{slot:"header"},slot:"header"},[a("mu-tr",[a("mu-th",{attrs:{tooltip:"ID"}},[t._v("ID")]),t._v(" "),a("mu-th",{attrs:{tooltip:"书名"}},[t._v("书名")]),t._v(" "),a("mu-th",{attrs:{tooltip:"作者"}},[t._v("作者")]),t._v(" "),a("mu-th",{attrs:{tooltip:"封面"}},[t._v("封面")]),t._v(" "),a("mu-th",{attrs:{tooltip:"类型"}},[t._v("类型")]),t._v(" "),a("mu-th",{attrs:{tooltip:"简介"}},[t._v("简介")]),t._v(" "),a("mu-th",{attrs:{tooltip:"状态"}},[t._v("状态")]),t._v(" "),a("mu-th",{attrs:{tooltip:"操作"}},[t._v("操作")]),t._v(" "),a("mu-th",{attrs:{tooltip:"删除"}},[t._v("删除")])],1)],1),t._v(" "),a("mu-tbody",t._l(t.tableData,function(e,o){return a("mu-tr",{key:o,attrs:{selected:e.selected}},[a("mu-td",[t._v(t._s(o+1))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("a",{attrs:{href:"#/bookDetails/"+e.id}},[t._v(t._s(e.book_name))])]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.author))]),t._v(" "),a("mu-td",[a("img",{staticStyle:{width:"40px","vertical-align":"middle"},attrs:{src:"http://read.beluga.ai/api/static/images/cover/"+e.cover}})]),t._v(" "),a("mu-td",[t._v(t._s(t.bookType[e.book_type]))]),t._v(" "),a("mu-td",{staticStyle:{overflow:"hidden"}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{staticStyle:{width:"260px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.describe))]),t._v(" "),a("p",{staticStyle:{color:"#ff4081"}},[t._v("查看内容")])])],1),t._v(" "),a("mu-td",[t._v(t._s(e.is_show?"已上架":"未上架"))]),t._v(" "),a("mu-td",[a("button",{staticClass:"bookListButton",on:{click:function(e){t.changeShow(o)}}},[t._v(t._s(e.is_show?"下架":"上架"))])]),t._v(" "),a("mu-td",[a("button",{staticClass:"bookListButton",on:{click:function(e){t.deleteBook(o)}}},[t._v("删除")])])],1)}))],1),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.total,current:t.current},on:{pageChange:t.handleClick}})],1)])},staticRenderFns:[]},C=a("VU/8")(k,g,!1,function(t){a("QL0K")},null,null).exports,x={data:function(){return{bookType:["仙剑","玄幻","悬疑","奇幻","军事","历史","竞技","科幻","校园","社会","其它"],searchTxt:"",tableData:[""],height:"500px",total:50,current:1,controPageKind:1,moneyNum:[],bookId:0}},mounted:function(){this.bookId=parseInt(this.$route.params.bookId),this.reqChapterInfo(this.current,"",this.bookId)},watch:{controPageKind:function(t){this.current=1}},methods:{handleClick:function(t){switch(this.moneyNum=[],this.controPageKind){case 1:this.reqChapterInfo(t,"",this.bookId);break;case 2:this.distinctChapterInfo(0,t,this.bookId);break;case 3:this.distinctChapterInfo(1,t,this.bookId);break;case 4:this.searchBookInfo(this.searchTxt,t,this.bookId);break;default:console.log("出错")}},reqChapterInfo:function(t,e,a){var o=this;this.controPageKind=1;var s=10*(t-1);axios({method:"POST",url:"./api/reqChapterInfo",data:{pageNumber:s,searchTxt:e,bookId:a}}).then(function(t){t=t.data,o.total=t.allPageNum[0].allNumber;for(var e=0;e<t.tableData.length;e++)t.tableData[e].chapter_type?o.moneyNum[e]=t.tableData[e].chapter_money:o.moneyNum[e]="";o.tableData=t.tableData})},distinctChapterInfo:function(t,e,a){var o=this;this.controPageKind=t?3:2;var s=10*(e-1);axios({method:"POST",url:"./api/distinctChapterInfo",data:{chapter_type:t,pageNumber:s,bookId:a}}).then(function(t){console.log(t.data),t=t.data,o.tableData=t.tableData;for(var e=0;e<t.tableData.length;e++)t.tableData[e].chapter_type?o.moneyNum[e]=t.tableData[e].chapter_money:o.moneyNum[e]="";o.total=t.allPageNum[0].allNumber})},searchBookInfo:function(t,e){this.controPageKind=4,this.reqChapterInfo(e,t,this.bookId)},setChapterMoney:function(t){if(1==this.tableData[t].chapter_type)this.reqSetChapterMoney(0,0,t);else if(""!=this.moneyNum[t]){var e=parseInt(this.moneyNum[t]);this.reqSetChapterMoney(1,e,t)}else alert("请输入金额")},reqSetChapterMoney:function(t,e,a){var o=this;axios({method:"POST",url:"./api/setChapterMoney",data:{chapter_type:t,chapter_money:e,id:this.tableData[a].allChapterId}}).then(function(t){console.log(t.data),(t=t.data).statue&&(1==o.tableData[a].chapter_type?(o.tableData[a].chapter_type=0,o.moneyNum[a]=""):o.tableData[a].chapter_type=1)})},uploadChapter:function(){0==this.bookId?alert("请先选择书籍"):this.$router.push("/chapterContant/"+this.bookId+"/0")},deleteChapter:function(t){var e=this;confirm("即将删除章节"+this.tableData[t].chapter_name+"，确认继续操作？")&&axios({method:"POST",url:"./api/deleteChapter",data:{id:this.tableData[t].allChapterId}}).then(function(a){(a=a.data).statue?(alert("删除章节"+e.tableData[t].chapter_name+"成功"),e.reqChapterInfo(e.current,e.searchTxt,e.bookId)):alert("删除章节"+e.tableData[t].chapter_name+"失败")})},getNowTime:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a);return t.getFullYear()+"-"+e+"-"+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},uploadAll:function(t){if(0!=this.bookId){var e=t.target.files[0],a=new FileReader,o=[],s=this,n=0;this.tableData.length>0&&(n=this.tableData[this.tableData.length-1].chapter_id),a.readAsText(e,"gb2312"),a.onload=function(t){for(var e=t.target.result.split(/第\S*章\s/),a=1;a<e.length;a++){var i=[],r=e[a].split("\n")[0],l=e[a].split(r)[1];i.push(s.bookId),i.push(n+a),i.push(r),i.push(l),i.push(l.length),i.push(s.getNowTime()),o.push(i)}axios({method:"POST",url:"./api/insertManyChapter",data:{resultInfo:o}}).then(function(t){(t=t.data).statue&&(s.reqChapterInfo(s.current,"",s.bookId),alert(s.tableData[0].book_name+o.length+"个章节批量上传成功"))})}}else alert("请先选择书籍")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"listName"},[t._v("章节列表")]),t._v(" "),a("div",{staticClass:"functionArea"},[a("mu-text-field",{staticClass:"searchTxt",attrs:{hintText:"请输入章节名"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton",attrs:{label:"查询",backgroundColor:"#00bfa5"},on:{click:function(e){t.searchBookInfo(t.searchTxt,t.current)}}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton",attrs:{label:"免费",backgroundColor:"#ffca28"},on:{click:function(e){t.distinctChapterInfo(0,t.current,t.bookId)}}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton",attrs:{label:"付费",backgroundColor:"#ffc107"},on:{click:function(e){t.distinctChapterInfo(1,t.current,t.bookId)}}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton",attrs:{label:"全部",backgroundColor:"#ff9800"},on:{click:function(e){t.reqChapterInfo(1,"",t.bookId)}}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton",attrs:{label:"单章上传",backgroundColor:"#ff5722"},on:{click:function(e){t.uploadChapter()}}}),t._v(" "),a("mu-raised-button",{staticClass:"bookUploadButton uploadManyButton",attrs:{label:"批量上传",backgroundColor:"#ff5722"}},[a("input",{staticClass:"uploadManyInput",attrs:{type:"file",id:"input"},on:{change:function(e){t.uploadAll(e)}}})])],1),t._v(" "),a("div",{staticClass:"Booktable"},[a("mu-table",{attrs:{fixedFooter:!1,fixedHeader:!0,height:t.height,enableSelectAll:!1,multiSelectable:!1,selectable:!1,showCheckbox:!1}},[a("mu-thead",{attrs:{slot:"header"},slot:"header"},[a("mu-tr",[a("mu-th",{attrs:{tooltip:"ID"}},[t._v("ID")]),t._v(" "),a("mu-th",{attrs:{tooltip:"书名"}},[t._v("书名")]),t._v(" "),a("mu-th",{attrs:{tooltip:"作者"}},[t._v("作者")]),t._v(" "),a("mu-th",{attrs:{tooltip:"类型"}},[t._v("类型")]),t._v(" "),a("mu-th",{attrs:{tooltip:"章节"}},[t._v("章节")]),t._v(" "),a("mu-th",{attrs:{tooltip:"状态"}},[t._v("状态")]),t._v(" "),a("mu-th",{attrs:{tooltip:"定价"}},[t._v("定价")]),t._v(" "),a("mu-th",{attrs:{tooltip:"操作"}},[t._v("操作")]),t._v(" "),a("mu-th",{attrs:{tooltip:"操作"}},[t._v("删除")])],1)],1),t._v(" "),a("mu-tbody",t._l(t.tableData,function(e,o){return a("mu-tr",{key:o,attrs:{selected:e.selected}},[a("mu-td",[t._v(t._s(o+1))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("a",{attrs:{href:"#/bookDetails/"+e.book_id}},[t._v(t._s(e.book_name))])]),t._v(" "),a("mu-td",[t._v(t._s(e.author))]),t._v(" "),a("mu-td",[t._v(t._s(t.bookType[e.book_type]))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("a",{attrs:{href:"#/chapterContant/"+e.book_id+"/"+e.chapter_id}},[t._v("第"+t._s(e.chapter_id)+"章 "+t._s(e.chapter_name))])]),t._v(" "),a("mu-td",[t._v(t._s(e.chapter_type?"付费":"免费"))]),t._v(" "),a("mu-td",[a("mu-text-field",{staticClass:"searchTxt",staticStyle:{"font-size":"10px",width:"50px"},attrs:{hintText:"猫币",type:"number",disabled:!!e.chapter_type},model:{value:t.moneyNum[o],callback:function(e){t.$set(t.moneyNum,o,e)},expression:"moneyNum[index]"}})],1),t._v(" "),a("mu-td",[a("button",{staticClass:"comment",on:{click:function(e){t.setChapterMoney(o)}}},[t._v(t._s(e.chapter_type?"免费":"付费"))])]),t._v(" "),a("mu-td",[a("button",{staticClass:"comment",on:{click:function(e){t.deleteChapter(o)}}},[t._v("删除")])])],1)}))],1),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.total,current:t.current},on:{pageChange:t.handleClick}})],1)])},staticRenderFns:[]},I=a("VU/8")(x,y,!1,function(t){a("g20g")},null,null).exports,T={data:function(){return{bookType:["仙剑","玄幻","悬疑","奇幻","军事","历史","竞技","科幻","校园","社会","其它"],searchTxt:"",tableData:[],height:"500px",total:50,current:1,controPageKind:1}},mounted:function(){this.reqAllBookStatistic(this.current,"")},methods:{handleClick:function(t){this.reqAllBookStatistic(t,this.searchTxt)},reqAllBookStatistic:function(t,e){var a=this;this.controPageKind=1;var o=10*(t-1);axios({method:"POST",url:"./api/reqAllBookStatistic",data:{pageNumber:o,searchTxt:e}}).then(function(t){console.log(t.data),t=t.data,a.tableData=t.tableData,a.total=t.allPageNum[0].allNumber})},allInfo:function(){this.searchTxt="",this.current=1,this.reqAllBookStatistic(1,"")}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"listName"},[t._v("书籍统计")]),t._v(" "),a("div",{staticClass:"functionArea"},[a("mu-text-field",{staticClass:"searchTxted",attrs:{hintText:"请输入书籍名或作者名"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"查询",backgroundColor:"#00bfa5"},on:{click:function(e){t.reqAllBookStatistic(t.current,t.searchTxt)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"全部",backgroundColor:"#ff9800"},on:{click:function(e){t.allInfo()}}})],1),t._v(" "),a("div",{staticClass:"Booktable"},[a("mu-table",{attrs:{fixedFooter:!1,fixedHeader:!0,height:t.height,enableSelectAll:!1,multiSelectable:!1,selectable:!1,showCheckbox:!1}},[a("mu-thead",{attrs:{slot:"header"},slot:"header"},[a("mu-tr",[a("mu-th",{attrs:{tooltip:"ID"}},[t._v("ID")]),t._v(" "),a("mu-th",{attrs:{tooltip:"书名"}},[t._v("书名")]),t._v(" "),a("mu-th",{attrs:{tooltip:"作者"}},[t._v("作者")]),t._v(" "),a("mu-th",{attrs:{tooltip:"类型"}},[t._v("类型")]),t._v(" "),a("mu-th",{attrs:{tooltip:"追书量"}},[t._v("追书量")]),t._v(" "),a("mu-th",{attrs:{tooltip:""}},[t._v("点击量")]),t._v(" "),a("mu-th",{attrs:{tooltip:"打赏量"}},[t._v("打赏量")]),t._v(" "),a("mu-th",{attrs:{tooltip:"订阅量"}},[t._v("订阅量")])],1)],1),t._v(" "),a("mu-tbody",t._l(t.tableData,function(e,o){return a("mu-tr",{key:o,attrs:{selected:e.selected}},[a("mu-td",[t._v(t._s(o+1))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.book_name))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.author))]),t._v(" "),a("mu-td",[t._v(t._s(t.bookType[e.book_type]))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.chase_book_num))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.click_num))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.reward_num))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.subscriber_num))])],1)}))],1),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.total,current:t.current},on:{pageChange:t.handleClick}})],1)])},staticRenderFns:[]},D=a("VU/8")(T,S,!1,function(t){a("0gqb")},null,null).exports,w={data:function(){return{bookType:["仙剑","玄幻","悬疑","奇幻","军事","历史","竞技","科幻","校园","社会","其它"],searchTxt:"",tableData:[""],height:"500px",total:50,current:1,controPageKind:1}},mounted:function(){this.reqComment(this.current,"")},methods:{handleClick:function(t){this.reqComment(t,this.searchTxt)},reqComment:function(t,e){var a=this;this.controPageKind=1;var o=10*(t-1);axios({method:"POST",url:"./api/reqComment",data:{pageNumber:o,searchTxt:e}}).then(function(t){console.log(t.data.tableData),t=t.data,a.tableData=t.tableData,a.total=t.allPageNum[0].allNumber})},allInfo:function(){this.searchTxt="",this.current=1,this.reqComment(1,"")},makeTop:function(t){var e=this,a=this.tableData[t].id,o=this.tableData[t].comment_type;o=1==o?0:1,axios({method:"POST",url:"./api/updateTop",data:{id:a,type:o}}).then(function(a){(a=a.data).statue?1==e.tableData[t].comment_type?e.tableData[t].comment_type=0:e.tableData[t].comment_type=1:alert("置顶操作失败")})},deleteComment:function(t){var e=this,a=this.tableData[t].id;confirm("确定删除评论？")&&axios({method:"POST",url:"./api/deleteComment",data:{id:a}}).then(function(t){(t=t.data).statue?e.reqComment(e.current,e.searchTxt):alert("删除操作失败")})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"listName"},[t._v("评论管理")]),t._v(" "),a("div",{staticClass:"functionArea"},[a("mu-text-field",{staticClass:"searchTxted",attrs:{hintText:"请输入书籍名或作者名"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"查询",backgroundColor:"#00bfa5"},on:{click:function(e){t.reqComment(t.current,t.searchTxt)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"全部",backgroundColor:"#ff9800"},on:{click:function(e){t.allInfo()}}})],1),t._v(" "),a("div",{staticClass:"Booktable"},[a("mu-table",{attrs:{fixedFooter:!1,fixedHeader:!0,height:t.height,enableSelectAll:!1,multiSelectable:!1,selectable:!1,showCheckbox:!1}},[a("mu-thead",{attrs:{slot:"header"},slot:"header"},[a("mu-tr",[a("mu-th",{attrs:{tooltip:"ID"}},[t._v("ID")]),t._v(" "),a("mu-th",{attrs:{tooltip:"书名"}},[t._v("书名")]),t._v(" "),a("mu-th",{attrs:{tooltip:"作者"}},[t._v("作者")]),t._v(" "),a("mu-th",{attrs:{tooltip:"类型"}},[t._v("类型")]),t._v(" "),a("mu-th",{attrs:{tooltip:"评论"}},[t._v("评论")]),t._v(" "),a("mu-th",{attrs:{tooltip:"用户"}},[t._v("用户")]),t._v(" "),a("mu-th",{attrs:{tooltip:"置顶"}},[t._v("置顶")]),t._v(" "),a("mu-th",{attrs:{tooltip:"删除"}},[t._v("删除")])],1)],1),t._v(" "),a("mu-tbody",t._l(t.tableData,function(e,o){return a("mu-tr",{key:o,attrs:{selected:e.selected}},[a("mu-td",[t._v(t._s(o+1))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.book_name))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.author))]),t._v(" "),a("mu-td",[t._v(t._s(t.bookType[e.book_type]))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.user_name))]),t._v(" "),a("mu-td",{staticStyle:{overflow:"hidden"}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{staticStyle:{width:"260px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.comment_content))]),t._v(" "),a("p",{staticStyle:{color:"#ff4081"}},[t._v("查看评论")])])],1),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("button",{staticClass:"comment",attrs:{backgroundColor:"#ff9800"},on:{click:function(e){t.makeTop(o)}}},[t._v(t._s(1==e.comment_type?"取消":"置顶"))])]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("button",{staticClass:"comment",attrs:{backgroundColor:"#ff9800"},on:{click:function(e){t.deleteComment(o)}}},[t._v("删除")])])],1)}))],1),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.total,current:t.current},on:{pageChange:t.handleClick}})],1)])},staticRenderFns:[]},B=a("VU/8")(w,N,!1,function(t){a("Y1pN")},null,null).exports,q={data:function(){return{searchTxt:"",tableData:[""],height:"500px",total:50,current:1,controPageKind:1,dialogSubscribe:!1,listData:[],listTotal:10,listCurrent:1,userId:""}},mounted:function(){this.reqUser(this.current,"")},methods:{handleClick:function(t){this.reqUser(t,this.searchTxt)},reqUser:function(t,e){var a=this;this.controPageKind=1;var o=10*(t-1);axios({method:"POST",url:"./api/reqUser",data:{pageNumber:o,searchTxt:e}}).then(function(t){t=t.data,a.tableData=t.tableData,a.total=t.allPageNum[0].allNumber})},allInfo:function(){this.searchTxt="",this.current=1,this.reqUser(1,"")},reqUserSubscribe:function(t,e){var a=this,o=10*(t-1);axios({method:"POST",url:"./api/reqUserSubscribe",data:{pageNumber:o,userId:e}}).then(function(t){t=t.data,a.listData=t.tableData,a.listTotal=t.allPageNum[0].allNumber})},searchSubscribe:function(t){this.userId=this.tableData[t].id,this.dialogSubscribe=!0,this.listCurrent=1,this.reqUserSubscribe(this.listCurrent,this.userId)},deleteUser:function(t){var e=this;confirm("确认删除此用户？")&&(this.userId=this.tableData[t].id,axios({method:"POST",url:"./api/deleteUser",data:{id:this.userId}}).then(function(t){console.log(t.data),(t=t.data).statue&&e.reqUser(e.current,"")}))},listHandleClick:function(t){this.reqUserSubscribe(t,this.userId)}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"listName"},[t._v("读者信息")]),t._v(" "),a("div",{staticClass:"functionArea"},[a("mu-text-field",{staticClass:"searchTxted",attrs:{hintText:"请输入读者名"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"查询",backgroundColor:"#00bfa5"},on:{click:function(e){t.reqUser(t.current,t.searchTxt)}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"全部",backgroundColor:"#ff9800"},on:{click:function(e){t.allInfo()}}})],1),t._v(" "),a("div",{staticClass:"Booktable"},[a("mu-table",{attrs:{fixedFooter:!1,fixedHeader:!0,height:t.height,enableSelectAll:!1,multiSelectable:!1,selectable:!1,showCheckbox:!1}},[a("mu-thead",{attrs:{slot:"header"},slot:"header"},[a("mu-tr",[a("mu-th",{attrs:{tooltip:"ID"}},[t._v("ID")]),t._v(" "),a("mu-th",{attrs:{tooltip:"昵称"}},[t._v("昵称")]),t._v(" "),a("mu-th",{attrs:{tooltip:"手机"}},[t._v("手机")]),t._v(" "),a("mu-th",{attrs:{tooltip:"余额"}},[t._v("余额")]),t._v(" "),a("mu-th",{attrs:{tooltip:"推荐票"}},[t._v("推荐票")]),t._v(" "),a("mu-th",{attrs:{tooltip:"钻石票"}},[t._v("钻石票")]),t._v(" "),a("mu-th",{attrs:{tooltip:"订阅"}},[t._v("订阅")]),t._v(" "),a("mu-th",{attrs:{tooltip:"删除"}},[t._v("删除")])],1)],1),t._v(" "),a("mu-tbody",t._l(t.tableData,function(e,o){return a("mu-tr",{key:o,attrs:{selected:e.selected}},[a("mu-td",[t._v(t._s(e.id))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.user_name))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.phone))]),t._v(" "),a("mu-td",[t._v(t._s(e.balance))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.recommend_ticket_num))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal",overflow:"hidden"}},[t._v(t._s(e.diamond_ticket_num))]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("button",{staticClass:"comment",attrs:{backgroundColor:"#ff9800"},on:{click:function(e){t.searchSubscribe(o)}}},[t._v("查看")])]),t._v(" "),a("mu-td",{staticStyle:{"white-space":"normal"}},[a("button",{staticClass:"comment",attrs:{backgroundColor:"#ff9800"},on:{click:function(e){t.deleteUser(o)}}},[t._v("删除")])])],1)}))],1),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.total,current:t.current},on:{pageChange:t.handleClick}})],1),t._v(" "),a("mu-dialog",{attrs:{open:t.dialogSubscribe,title:"追书"},on:{close:function(e){t.dialogSubscribe=!1}}},[a("mu-list",t._l(t.listData,function(e,o){return a("mu-list-item",{attrs:{title:e.book_name}},[a("div",{staticStyle:{"font-size":"10px"},attrs:{slot:"right"},slot:"right"},[t._v(t._s(e.author))])])})),t._v(" "),a("mu-pagination",{staticStyle:{"padding-bottom":"20px"},attrs:{total:t.listTotal,current:t.listCurrent},on:{pageChange:t.listHandleClick}}),t._v(" "),a("mu-flat-button",{attrs:{slot:"actions",primary:"",label:"返回"},on:{click:function(e){t.dialogSubscribe=!1}},slot:"actions"})],1)],1)},staticRenderFns:[]},U=a("VU/8")(q,P,!1,function(t){a("8MZz")},null,null).exports,A={data:function(){return{thisBookType:0,bookType:["仙剑","玄幻","悬疑","奇幻","军事","历史","竞技","科幻","校园","社会","其它"],imageUrl:"http://read.beluga.ai/api/static/images/cover/cover-2.jpeg",bookId:0,book_name:"",author:"",describe:""}},mounted:function(){this.bookId=parseInt(this.$route.params.bookId),0!=this.bookId&&this.reqBookDetails(this.bookId)},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},reqBookDetails:function(t){var e=this;console.log(t),axios({method:"POST",url:"./api/reqBookDetails",data:{id:t}}).then(function(t){console.log(t.data),t=t.data.resultData[0],e.book_name=t.book_name,e.author=t.author,e.describe=t.describe,e.imageUrl="http://read.beluga.ai/api/static/images/cover/"+t.cover,e.thisBookType=t.book_type})},updateBookDetails:function(t,e){axios({method:"POST",url:"./api/updateBookDetails",data:{id:e,info:t}}).then(function(t){(t=t.data).statue&&alert("更新成功")})},insertBookDetails:function(t){var e=this;axios({method:"POST",url:"./api/insertBookDetails",data:{info:t}}).then(function(t){console.log(t.data),t=t.data,e.$router.push("/bookDetails/"+t.id)})},useBookDetails:function(){if(this.imageUrl&&this.book_name&&this.author&&this.describe){var t={};t.book_name=this.book_name,t.author=this.author,t.describe=this.describe,t.cover=this.imageUrl.split("/").pop(),t.book_type=this.thisBookType,0==this.bookId?this.insertBookDetails(t):this.updateBookDetails(t,this.bookId)}else alert("请填写完整信息后上传")},goChapter:function(){this.bookId?this.$router.push("/bookUpload/"+this.bookId):alert("请先创建书籍")}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"pageTitle"},[t._v("书籍详情")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("mu-text-field",{attrs:{hintText:"请输入书名"},model:{value:t.book_name,callback:function(e){t.book_name=e},expression:"book_name"}}),a("br"),t._v(" "),a("mu-text-field",{attrs:{hintText:"请输入作者"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}}),a("br"),t._v(" "),a("mu-text-field",{attrs:{hintText:"请输入书籍简介",multiLine:"",rows:3,rowsMax:6},model:{value:t.describe,callback:function(e){t.describe=e},expression:"describe"}}),a("br"),t._v(" "),a("mu-select-field",{attrs:{labelFocusClass:["label-foucs"],label:"选择书籍类型"},model:{value:t.thisBookType,callback:function(e){t.thisBookType=e},expression:"thisBookType"}},t._l(t.bookType,function(t,e){return a("mu-menu-item",{key:e,attrs:{value:e,title:t}})})),t._v(" "),a("br"),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button detailsButton",attrs:{label:"上传",primary:""},on:{click:function(e){t.useBookDetails()}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button detailsButton",attrs:{label:"查看章节",primary:""},on:{click:function(e){t.goChapter()}}})],1)},staticRenderFns:[]},M=a("VU/8")(A,$,!1,function(t){a("twLN")},null,null).exports,O={data:function(){return{chapterName:"",chapterContant:"",chapterId:"",bookId:""}},mounted:function(){this.bookId=parseInt(this.$route.params.bookId),this.chapterId=parseInt(this.$route.params.chapterId),this.chapterId?this.reqChapterContant():this.redAndSetChapterId()},methods:{redAndSetChapterId:function(){var t=this;axios({method:"POST",url:"./api/reqChapterId",data:{bookId:this.bookId}}).then(function(e){(e=e.data).chapter_id?t.chapterId=e.chapter_id+1:t.chapterId=1,console.log("chapter_id",t.chapterId)})},getNowTime:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a);return t.getFullYear()+"-"+e+"-"+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},insertChapterContant:function(){var t=this;this.chapterName&&this.chapterContant?axios({method:"POST",url:"./api/insertChapterContant",data:{bookId:this.bookId,chapterId:this.chapterId,chapterName:this.chapterName,chapterContant:this.chapterContant,wordNumber:this.chapterContant.length,updateDate:this.getNowTime()}}).then(function(e){(e=e.data).statue&&(alert("上传 第"+t.chapterId+"章 "+t.chapterName+" 成功"),t.chapterId+=1,t.chapterName="",t.chapterContant="")}):alert("请输入完整内容")},reqChapterContant:function(){var t=this;axios({method:"POST",url:"./api/reqChapterContant",data:{bookId:this.bookId,chapterId:this.chapterId}}).then(function(e){(e=e.data.data)?(t.chapterName=e.chapter_name,t.chapterContant=e.chapter_content):(alert("该章节不存在, 即将跳转上传章节页"),t.$router.push("/chapterContant/"+t.bookId+"/0"))})},updateChapterContent:function(){var t=this;axios({method:"POST",url:"./api/updateChapterContent",data:{bookId:this.bookId,chapterId:this.chapterId,chapterName:this.chapterName,chapterContant:this.chapterContant,wordNumber:this.chapterContant.length,updateDate:this.getNowTime()}}).then(function(e){(e=e.data).statue&&alert("更新 第"+t.chapterId+"章 "+t.chapterName+" 成功")})},saveContent:function(){0==parseInt(this.$route.params.chapterId)?this.insertChapterContant():this.updateChapterContent()}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contant"},[a("div",{staticClass:"contantName"},[t._v("章节内容")]),t._v(" "),a("el-input",{staticClass:"chapterName",attrs:{placeholder:"请输入章节标题"},model:{value:t.chapterName,callback:function(e){t.chapterName=e},expression:"chapterName"}}),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入章节内容"},model:{value:t.chapterContant,callback:function(e){t.chapterContant=e},expression:"chapterContant"}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button insertChapterContant",attrs:{label:"保存章节",primary:""},on:{click:function(e){t.saveContent()}}}),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button insertChapterContant",attrs:{label:"书籍目录",primary:""},on:{click:function(e){t.$router.push("/bookUpload/"+t.bookId)}}})],1)},staticRenderFns:[]},L=a("VU/8")(O,F,!1,function(t){a("y6Ab")},null,null).exports,K={data:function(){return{link:"/bookList",admin_no:"",admin_pw:""}},mounted:function(){this.sessionSetter("login","error"),this.sessionSetter("manage","error")},methods:{login:function(){"admin"==this.admin_no&&"123456"==this.admin_pw?(this.sessionSetter("login","haveLogin"),this.$router.push("/bookList")):alert("账户或密码错误")},handleTabChange:function(t){this.activeTab=t},sessionGetter:function(t){return sessionStorage.getItem("html5_test_"+t)},sessionSetter:function(t,e){sessionStorage.setItem("html5_test_"+t,e)}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"body"},[a("div",{staticStyle:{"padding-top":"80px"}},[a("mu-text-field",{attrs:{label:"账号",labelFloat:""},model:{value:t.admin_no,callback:function(e){t.admin_no=e},expression:"admin_no"}}),a("br"),t._v(" "),a("mu-text-field",{attrs:{label:"密码",hintText:"请输入密码",type:"password",labelFloa:""},model:{value:t.admin_pw,callback:function(e){t.admin_pw=e},expression:"admin_pw"}}),a("br"),t._v(" "),a("mu-raised-button",{staticClass:"demo-raised-button",staticStyle:{"margin-top":"40px"},attrs:{label:"登 陆",primary:"",to:t.link},on:{click:t.login}}),a("br")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"logo"},[this._v("\n      猫阅读后台登陆\n    ")])])}]},E=a("VU/8")(K,R,!1,function(t){a("C+C7")},"data-v-1d55c6d6",null).exports,V={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n\t暂无数据\n")])},staticRenderFns:[]},H=a("VU/8")(null,V,!1,null,null,null).exports,j={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n\t暂无数据\n")])},staticRenderFns:[]},Y=a("VU/8")(null,j,!1,null,null,null).exports;m.default.use(_.a);var W=new _.a({routes:[{path:"/login",name:"login",component:E},{path:"/",name:"rootView",component:f,beforeEnter:function(t,e,a){"haveLogin"==sessionStorage.getItem("html5_test_login")?a():a({path:"/login"})},children:[{path:"bookList",name:"bookList",component:C},{path:"bookUpload/:bookId",name:"bookUpload",component:I},{path:"bookDetails/:bookId",name:"bookDetails",component:M},{path:"chapterContant/:bookId/:chapterId",name:"chapterContant",component:L},{path:"bookStatistic",name:"bookStatistic",component:D},{path:"commentManage",name:"commentManage",component:B},{path:"readerData",name:"readerData",component:U},{path:"sortManage",name:"sortManage",component:H},{path:"dataShow",name:"dataShow",component:Y}]}]}),z=a("u64Q"),J=a.n(z),Q=(a("E51W"),a("thDu"),a("mtWM")),G=a.n(Q);m.default.use(J.a),m.default.use(d.a),m.default.use(u.a),m.default.use(l.a),m.default.use(i.a),m.default.use(s.a),m.default.config.productionTip=!1,window.axios=G.a,new m.default({el:"#app",router:W,template:"<App/>",components:{App:b}})},QL0K:function(t,e){},RWjY:function(t,e){},"Rj+v":function(t,e){},"X+ky":function(t,e){},Y1pN:function(t,e){},Yq4J:function(t,e){},g20g:function(t,e){},jAzQ:function(t,e){},thDu:function(t,e){},twLN:function(t,e){},y6Ab:function(t,e){},ylrw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fa1298374af6d20bba35.js.map